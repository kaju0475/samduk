# 🚨 시스템 긴급 복구 매뉴얼

본 시스템은 **데이터 무결성(Data Integrity)**을 최우선으로 보호하도록 설계되었습니다.  
따라서 `db.json` 파일이 손상되었거나 실수로 삭제된 경우, **절대로 빈 데이터를 자동 생성하지 않고 시스템이 정지**합니다.

만약 서버 로그에 다음과 같은 메시지가 나타나면:

> `CRITICAL SAFETY HALT: 'db.json' missing. System will NOT auto-initialize.`

다음 절차에 따라 복구를 진행해주십시오.

---

## 🛠️ 복구 방법 (원클릭)

바탕화면 또는 프로젝트 폴더에 있는 **`recover_system.bat`** 파일을 실행(더블 클릭)하십시오.

1. `recover_system.bat` 파일을 더블 클릭합니다.
2. 검은색 창이 뜨면 내용을 확인하고 엔터(Enter)를 누릅니다.
3. 시스템이 자동으로 가장 최근의 **정상적인 백업 파일(1KB 이상)**을 찾아 복구합니다.
4. "성공" 메시지가 뜨면 서버를 다시 시작하십시오.

---

## ⚠️ 주의사항

- 이 기능은 가장 마지막으로 저장된 '안전한 백업'으로 되돌리는 기능입니다.
- 파일 깨짐 사고 발생 시점 직전의 데이터로 복구되므로, 사고 발생 시점 이후의(저장되지 않은) 작업 내용은 복구되지 않을 수 있습니다.
- 복구 후 반드시 거래처 및 용기 현황을 확인하시기 바랍니다.

---

## 👨‍💻 관리자 수동 초기화

만약 시스템을 정말로 **완전히 초기화(공장 초기화)**하고 싶다면:

1. `db.json` 파일을 수동으로 삭제하지 마십시오 (백업 시스템이 작동하여 복구하려 할 수 있습니다).
2. 관리자 페이지 > **시스템 설정** 메뉴로 이동합니다.
3. **[초기화]** 버튼을 클릭하여 명시적으로 초기화를 진행하십시오. (이 기능은 관리자 권한으로만 작동하며, API를 통한 외부 강제 초기화는 차단되어 있습니다.)
